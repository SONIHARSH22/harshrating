<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="/styles/main.css" />

    <title>Document</title>
</head>

<body>
    <h1>Hello foodies</h1>
    <h3>wellcome <%=username %>
    </h3>


    <!-- <a href="/add"><button>want to add store</button></a> -->

    

    <form action="/bycitybyareabyfood" method="get" onsubmit="toLowerCaseInputs()">
        <h2>
            Search By:
            <select name="city" id="cityInput">
                <option value="">Select City</option>
                <option value="mumbai">Mumbai</option>
                <option value="mandvi">Mandvi</option>
                <option value="ahmedabad">Ahmedabad</option>
                <option value="rajkot">Rajkot</option>
                <option value="delhi">Delhi</option>
                <!-- Add more options as needed -->
            </select>
            <input type="text" name="fooditem" placeholder="Enter Food Item" />,
            <input type="text" name="area" placeholder="Your City Area" />,
            <input type="text" name="storename" placeholder="Store Name" />,
            <button type="submit">Submit</button>
        </h2>
    </form>

    <div class="mainouter" id="container">
        <% if (street.length===0) { %>
            <div class="not-found">
                <h2>No store found</h2>
            </div>
            <% } else { %>
                <% street.forEach(element=> { %>
                    <div class="outer" onclick="redirectToDetail('<%= element.id %>')">
                        <div class="supposeimage">
                            <p>.</p>
                        </div>
        
                        <div class="detail">
                            <li>
                            <h2>
                                <%= element.store_name %>,
                            </h2>
                            </li>
                            <li>
                            <h4>
                                <img src="/images/pin.png" alt="" />&nbsp <%= element.city %>,&nbsp <%= element.area %>,
                            </h4>
                        </li>
                        <li>
                            <h3>
                                <%= element.food_item %>,
                            </h3>
                        </li>
                        <li>
                            <h3>
                                <%= element.overall_rating %>,
                            </h3>
                        </li>
                    </div>
                    </div>
                    <% }) %>
        <% } %>
    </div>

<script>
    function redirectToDetail(storeId) {
        // Redirect to the detail page with the storeId as a parameter
        window.location.href = '/showdetial?id=' + encodeURIComponent(storeId);
    }
</script>
<script>
    function toLowerCaseInputs() {
        // Get all input fields
        var cityInput = document.getElementById('cityInput');
        var foodItemInput = document.getElementsByName('fooditem')[0];
        var areaInput = document.getElementsByName('area')[0];
        var storeNameInput = document.getElementsByName('storename')[0];

        // Convert their values to lowercase
        cityInput.value = cityInput.value.toLowerCase();
        foodItemInput.value = foodItemInput.value.toLowerCase();
        areaInput.value = areaInput.value.toLowerCase();
        storeNameInput.value = storeNameInput.value.toLowerCase();
    }
</script>
</body>

</html>
